<div class="fitbit" ng-controller="Fitbit">

    <div ng-switch="currentStatGroup">
        <p>
            <!-- Today's Statistics -->
        <div ng-switch-when="0">
            <div><span class="fitbit-subtitle">{{'fitbit.today' | translate}}</span></div>
            <div>
					<span class="fitbit-item">{{todaySummary.summary.steps}} {{'fitbit.steps' | translate}}
						<span class="fitbit-goals">{{todaySummary.goals.steps}}</span>
					</span>
                <div class="fitbit-progress-bar">
                    <div class="fitbit-progress"
                         ng-style="{'width': (todaySummary.summary.steps > todaySummary.goals.steps) ? '100%', 'background-color': 'lime' : (100 * todaySummary.summary.steps / todaySummary.goals.steps) + '%'}"></div>
                </div>
            </div>

            <!-- TODO: Add localized distance. -->
            <div>
					<span class="fitbit-item">{{todaySummary.summary.distances[0].distance}} {{'fitbit.distance' | translate}}
						<span class="fitbit-goals">{{todaySummary.goals.distance}}</span>
					</span>
                <div class="fitbit-progress-bar">
                    <div class="fitbit-progress"
                         ng-style="{'width': (todaySummary.summary.distances[0].distance > todaySummary.goals.distance)  ? '100%', 'background-color': 'lime' : (100 * todaySummary.summary.distances[0].distance / todaySummary.goals.distance) + '%'}"></div>
                </div>
            </div>

            <div><span class="fitbit-item">{{todaySummary.summary.caloriesOut}} {{'fitbit.caloriesBurned' | translate}}
					<span class="fitbit-goals">{{todaySummary.goals.caloriesOut}}</span>
					</span>
                <div class="fitbit-progress-bar">
                    <div class="fitbit-progress"
                         ng-style="{'width': (todaySummary.summary.caloriesOut > todaySummary.goals.caloriesOut) ? '100%', 'background-color': 'lime' : (100 * todaySummary.summary.caloriesOut / todaySummary.goals.caloriesOut) + '%'}"></div>
                </div>
            </div>

            <div><span class="fitbit-item">{{(todaySummary.summary.veryActiveMinutes) + (todaySummary.summary.fairlyActiveMinutes)}} {{'fitbit.activeMinutes' | translate}}
					<span class="fitbit-goals">{{todaySummary.goals.activeMinutes}} </span>
					</span>
                <div class="fitbit-progress-bar">
                    <div class="fitbit-progress"
                         ng-style="{'width': (todaySummary.summary.veryActiveMinutes + todaySummary.summary.fairlyActiveMinutes > todaySummary.goals.activeMinutes ? '100%', 'background-color': 'lime' : (100 * (todaySummary.summary.veryActiveMinutes + todaySummary.summary.fairlyActiveMinutes) / todaySummary.goals.activeMinutes) + '%' )}"></div>
                </div>
            </div>

            <div><span class="fitbit-item">{{todaySummary.summary.floors}} {{'fitbit.floors' | translate}}
					<span class="fitbit-goals">{{todaySummary.goals.floors}}</span>
					</span>
                <div class="fitbit-progress-bar">
                    <div class="fitbit-progress"
                         ng-style="{'width': (todaySummary.summary.floors > todaySummary.goals.floors ? '100%', 'background-color': 'lime' : (100 * todaySummary.summary.floors / todaySummary.goals.floors ) + '%')}"></div>
                </div>
            </div>
        </div>

        <!-- Weekly Average -->
        <div ng-switch-when="1">
            <div><span class="fitbit-subtitle">{{'fitbit.weekAverage' | translate}}</span></div>
            <div><span class="fitbit-item">{{profile.averageDailySteps}} {{'fitbit.steps' | translate}}</span></div>
        </div>

        <!-- Last Night's Sleeping Statistics -->
        <div ng-switch-when="2">
            <div><span class="fitbit-subtitle" ng-show="sleep.sleep[0]">{{'fitbit.sleep' | translate}}</span></div>
            <div><span class="fitbit-item" ng-show="sleep.sleep[0]">{{'fitbit.lastNight' | translate}} {{(sleep.sleep[0].minutesAsleep/60 | number:2 )}} {{'fitbit.hours' | translate}}</span>
            </div>
            <div><span class="fitbit-item" ng-show="sleep.sleep[0]">{{'fitbit.awakeMins' | translate}} {{sleep.sleep[0].minutesAwake}} min</span>
            </div>
            <!-- // {{(sleep.sleep[0].efficiency)}} % {{'fitbit.efficient' | translate}} -->
            <div><span class="fitbit-item" ng-show="sleep.sleep[0]">{{'fitbit.restlessMins' | translate}} {{sleep.sleep[0].restlessDuration}} min</span>
            </div>
        </div>

        <!-- Top Badges Earned -->
        <div ng-switch-when="3">
            <div><span class="fitbit-subtitle">{{'fitbit.topBadges' | translate}}</span></div>
            <div class="" ng-repeat="badge in profile.topBadges">
                <div>
                    <span class="fitbit-item"><img class="fitbit-badge" ng-src="{{badge.image50px}}"/></span>
                    <span class="fitbit-item">{{badge.description}}</span>
                </div>
            </div>
        </div>

        <div ng-switch-when="4">

        </div>
        </p>
    </div>

    <!-- List of Fitbit Devices -->
    <div class="" ng-repeat="device in devices">
        <p>
            <span class="fitbit-title" ng-show="device.deviceVersion">{{device.deviceVersion}}</span><br>
            <span class="fitbit-item" ng-show="device.battery">{{'fitbit.batteryStatus' | translate}}: {{device.battery}}<br>

                <!-- Make changes to only display the mins or hours or days, not the date. -->
    	<span class="fitbit-item" ng-show="device.lastSyncTime">{{'fitbit.lastSync' | translate}}: {{device.lastSyncTime | date: 'dd.MM.yyyy HH:mm:ss'}}</span>
        </p>
    </div>
</div>